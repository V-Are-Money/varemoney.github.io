<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scrolling Transition Effect</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
    function App() {
        const [scrollY, setScrollY] = React.useState(0);
        const [welcomeHeight, setWelcomeHeight] = React.useState(200);
        const [viewportHeight, setViewportHeight] = React.useState(window.innerHeight);
        const [visionHeight, setVisionHeight] = React.useState(200);
        const [tokenomicsHeight, setTokenomicsHeight] = React.useState(200);
        const [socialsHeight, setSocialsHeight] = React.useState(200);
        const [buyHeight, setBuyHeight] = React.useState(200); // New state for Buy

        const gap = 800;
        const topGap = viewportHeight / 4;
        const fadeOutDistance = 50;
        const fadeInDistance = 400;

        const handleWelcomeLoad = (e) => {
            setWelcomeHeight(e.target.height);
        };

        const handleVisionLoad = (e) => {
            setVisionHeight(e.target.height);
        };

        const handleTokenomicsLoad = (e) => {
            setTokenomicsHeight(e.target.height);
        };

        const handleSocialsLoad = (e) => {
            setSocialsHeight(e.target.height);
        };

        const handleBuyLoad = (e) => {
            setBuyHeight(e.target.height);
        };

        const welcomeTransitionPoint = topGap + welcomeHeight + gap;
        const visionTransitionPoint = welcomeTransitionPoint + visionHeight + gap;
        const tokenomicsTransitionPoint = visionTransitionPoint + tokenomicsHeight + gap;
        const socialsTransitionPoint = tokenomicsTransitionPoint + socialsHeight + gap;
        const buyTransitionPoint = socialsTransitionPoint + gap;

        React.useEffect(() => {
            const handleScroll = () => {
                const maxScroll = buyTransitionPoint - (topGap * 4);
                const newScrollY = Math.min(window.scrollY, maxScroll);
                setScrollY(newScrollY);

                if (newScrollY >= welcomeTransitionPoint - topGap - welcomeHeight) {
                    console.log('Welcome transition started!');
                }
                if (newScrollY >= visionTransitionPoint - topGap - visionHeight) {
                    console.log('Vision transition started!');
                }
                if (newScrollY >= tokenomicsTransitionPoint - topGap - tokenomicsHeight) {
                    console.log('Tokenomics transition started!');
                }
                if (newScrollY >= socialsTransitionPoint - topGap - socialsHeight) {
                    console.log('Socials transition started!');
                }
                if (newScrollY >= buyTransitionPoint - topGap - buyHeight) {
                    console.log('Buy transition started!');
                }
            };

            const handleResize = () => {
                setTimeout(() => {
                    setViewportHeight(window.innerHeight);
                    handleWelcomeLoad({ target: document.querySelector('img[alt="Welcome"]') });
                    handleVisionLoad({ target: document.querySelector('img[alt="Vision"]') });
                    handleTokenomicsLoad({ target: document.querySelector('img[alt="Tokenomics"]') });
                    handleSocialsLoad({ target: document.querySelector('img[alt="Socials"]') });
                    handleBuyLoad({ target: document.querySelector('img[alt="Buy"]') });
                }, 100);
            };

            window.addEventListener('scroll', handleScroll);
            window.addEventListener('resize', handleResize);

            return () => {
                window.removeEventListener('scroll', handleScroll);
                window.removeEventListener('resize', handleResize);
            };
        }, [welcomeTransitionPoint, visionTransitionPoint, tokenomicsTransitionPoint, socialsTransitionPoint, buyTransitionPoint, topGap, welcomeHeight]);

        const isWelcomeTransitioning = scrollY >= welcomeTransitionPoint - topGap - welcomeHeight;
        const isVisionTransitioning = scrollY >= visionTransitionPoint - topGap - visionHeight;
        const isTokenomicsTransitioning = scrollY >= tokenomicsTransitionPoint - topGap - tokenomicsHeight;
        const isSocialsTransitioning = scrollY >= socialsTransitionPoint - topGap - socialsHeight;
        const isBuyTransitioning = scrollY >= buyTransitionPoint - topGap - buyHeight;

        const welcomeTransitionProgress = Math.max(0, Math.min(1, (scrollY - (welcomeTransitionPoint - topGap - welcomeHeight)) / welcomeHeight));
        const visionTransitionProgress = Math.max(0, Math.min(1, (scrollY - (visionTransitionPoint - topGap - visionHeight)) / visionHeight));
        const tokenomicsTransitionProgress = Math.max(0, Math.min(1, (scrollY - (tokenomicsTransitionPoint - topGap - tokenomicsHeight)) / tokenomicsHeight));
        const socialsTransitionProgress = Math.max(0, Math.min(1, (scrollY - (socialsTransitionPoint - topGap - socialsHeight)) / socialsHeight));
        const buyTransitionProgress = Math.max(0, Math.min(1, (scrollY - (buyTransitionPoint - topGap - buyHeight)) / buyHeight));

        const welcomePosition = scrollY < welcomeTransitionPoint - topGap - welcomeHeight
            ? Math.max(topGap, topGap - scrollY)
            : welcomeTransitionProgress < 1
                ? topGap - welcomeHeight * welcomeTransitionProgress
                : topGap - welcomeHeight - (scrollY - (welcomeTransitionPoint - topGap));

        const visionPosition = scrollY < visionTransitionPoint - topGap - visionHeight
            ? Math.max(topGap, Math.min(welcomeTransitionPoint - scrollY, topGap + visionHeight + gap))
            : visionTransitionProgress < 1
                ? topGap - visionHeight * visionTransitionProgress
                : topGap - visionHeight - (scrollY - (visionTransitionPoint - topGap));

        const tokenomicsPosition = scrollY < tokenomicsTransitionPoint - topGap - tokenomicsHeight
            ? Math.max(topGap, Math.min(visionTransitionPoint - scrollY, topGap + tokenomicsHeight + gap))
            : tokenomicsTransitionProgress < 1
                ? topGap - tokenomicsHeight * tokenomicsTransitionProgress
                : topGap - tokenomicsHeight - (scrollY - (tokenomicsTransitionPoint - topGap));

        const socialsPosition = scrollY < socialsTransitionPoint - topGap - socialsHeight
            ? Math.max(topGap, Math.min(tokenomicsTransitionPoint - scrollY, topGap + socialsHeight + gap))
            : socialsTransitionProgress < 1
                ? topGap - socialsHeight * socialsTransitionProgress
                : topGap - socialsHeight - (scrollY - (socialsTransitionPoint - topGap));

        const buyPosition = scrollY < buyTransitionPoint - topGap - buyHeight
            ? Math.max(topGap, Math.min(socialsTransitionPoint - scrollY, topGap + buyHeight + gap))
            : buyTransitionProgress < 1
                ? topGap - buyHeight * buyTransitionProgress
                : topGap - buyHeight - (scrollY - (buyTransitionPoint - topGap));

        const welcomeOpacity = Math.max(0, Math.min(1, isWelcomeTransitioning
            ? 1 - (scrollY - (welcomeTransitionPoint - topGap)) / fadeOutDistance
            : 1));

        const fadeInStartPointVision = welcomeTransitionPoint - topGap - visionHeight - fadeInDistance - 100;
        const fadeInStartPointTokenomics = visionTransitionPoint - topGap - tokenomicsHeight - fadeInDistance - 100;
        const fadeInStartPointSocials = tokenomicsTransitionPoint - topGap - socialsHeight - fadeInDistance - 100;
        const fadeInStartPointBuy = socialsTransitionPoint - topGap - buyHeight - fadeInDistance - 100;

        const visionOpacity = Math.max(0, Math.min(1, isVisionTransitioning
            ? 1 - (scrollY - (visionTransitionPoint - topGap)) / fadeOutDistance
            : (scrollY - fadeInStartPointVision) / fadeInDistance));

        const tokenomicsOpacity = Math.max(0, Math.min(1, isTokenomicsTransitioning
            ? 1 - (scrollY - (tokenomicsTransitionPoint - topGap)) / fadeOutDistance
            : (scrollY - fadeInStartPointTokenomics) / fadeInDistance));

        const socialsOpacity = Math.max(0, Math.min(1, isSocialsTransitioning
            ? 1 - (scrollY - (socialsTransitionPoint - topGap)) / fadeOutDistance
            : (scrollY - fadeInStartPointSocials) / fadeInDistance));

        const buyOpacity = Math.max(0, Math.min(1, isBuyTransitioning
            ? 1 - (scrollY - (buyTransitionPoint - topGap)) / fadeOutDistance
            : (scrollY - fadeInStartPointBuy) / fadeInDistance));

        return (
            <div className="h-[1000vh] relative">
                <div
                    className="fixed top-0 left-1/2 w-3/4 flex flex-col items-center justify-center transform -translate-x-1/2"
                    style={{
                        transform: `translateX(-50%) translateY(${welcomePosition}px)`,
                        transition: 'transform 0.1s ease-out, opacity 0.3s ease-out',
                        opacity: welcomeOpacity,
                    }}
                >
                    <div className="flex flex-col items-center">
                        <img
                            src="images/content/welcome.png"
                            alt="Welcome"
                            className="w-full h-auto"
                            onLoad={handleWelcomeLoad}
                        />
                        <div
                            className="text-center text-xl mt-5"
                            style={{
                                opacity: isWelcomeTransitioning ? 0 : 1,
                                transition: 'opacity 0.3s ease-out',
                            }}
                        >
                            Welcome Section Content
                        </div>
                        <div
                            className="text-center text-xl mt-5"
                            style={{
                                opacity: isVisionTransitioning ? 0 : 1,
                                transition: 'opacity 0.3s ease-out',
                            }}
                        >
                            Vision Section Content
                        </div>
                        <div
                            className="text-center text-xl mt-5"
                            style={{
                                opacity: isTokenomicsTransitioning ? 0 : 1,
                                transition: 'opacity 0.3s ease-out',
                            }}
                        >
                            Tokenomics Section Content
                        </div>
                    </div>
                </div>
                <div
                    className="fixed top-0 left-1/2 w-3/4 flex flex-col items-center justify-center transform -translate-x-1/2"
                    style={{
                        transform: `translateX(-50%) translateY(${visionPosition}px)`,
                        transition: 'transform 0.1s ease-out, opacity 0.3s ease-out',
                        opacity: visionOpacity,
                    }}
                >
                    <div className="flex flex-col items-center">
                        <img
                            src="images/content/vision-with-text.png"
                            alt="Vision"
                            className="w-full h-auto"
                            onLoad={handleVisionLoad}
                        />
                    </div>
                </div>
                <div
                    className="fixed top-0 left-1/2 w-3/4 flex flex-col items-center justify-center transform -translate-x-1/2"
                    style={{
                        transform: `translateX(-50%) translateY(${tokenomicsPosition}px)`,
                        transition: 'transform 0.1s ease-out, opacity 0.3s ease-out',
                        opacity: tokenomicsOpacity,
                    }}
                >
                    <div className="flex flex-col items-center">
                        <img
                            src="images/content/tokenomics-with-text.png"
                            alt="Tokenomics"
                            className="w-full h-auto"
                            onLoad={handleTokenomicsLoad}
                        />
                    </div>
                </div>
                <div
                    className="fixed top-0 left-1/2 w-3/4 flex flex-col items-center justify-center transform -translate-x-1/2"
                    style={{
                        transform: `translateX(-50%) translateY(${socialsPosition}px)`,
                        transition: 'transform 0.1s ease-out, opacity 0.3s ease-out',
                        opacity: socialsOpacity,
                    }}
                >
                    <div className="flex flex-col items-center">
                        <img
                            src="images/content/socials-with-text.png"
                            alt="Socials"
                            className="w-full h-auto"
                            onLoad={handleSocialsLoad}
                        />
                    </div>
                </div>
                <div
                    className="fixed top-0 left-1/2 w-3/4 flex flex-col items-center justify-center transform -translate-x-1/2"
                    style={{
                        transform: `translateX(-50%) translateY(${buyPosition}px)`,
                        transition: 'transform 0.1s ease-out, opacity 0.3s ease-out',
                        opacity: buyOpacity,
                    }}
                >
                    <div className="flex flex-col items-center">
                        <img
                            src="images/content/buy-with-text.png"
                            alt="Buy"
                            className="w-full h-auto"
                            onLoad={handleBuyLoad}
                        />
                    </div>
                </div>
            </div>
        );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
